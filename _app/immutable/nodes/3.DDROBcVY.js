import{t as m,a as l,c as Ce,b as _}from"../chunks/CpKdPGD8.js";import{p as $t,s as w,a as De,f as T,t as h,b as xt,c as s,d as p,g as t,e as v,r as c,n as $}from"../chunks/CZwRfTkF.js";import{d as wt,s as u}from"../chunks/B50ZXVVo.js";import{i as y,s as yt,a as F}from"../chunks/DFIwwViK.js";import{S as At,M as bt,T as It,B as x,e as kt,h as Fe,a as Lt,b as Mt,g as St,p as Pt,i as Gt,c as Tt,s as Je}from"../chunks/CdlBbDUa.js";import{g as Kt}from"../chunks/Bhw4JXaq.js";import"../chunks/BA8FovzJ.js";import{o as Be,w as J}from"../chunks/CB0yOypd.js";var Et=m("<!> <!>",1),Rt=m("<p><!></p> <!>",1),Nt=(oe,Q,I)=>p(Q,t(I),!0),Ot=m('<img alt="Generated illustration" class="w-full h-auto rounded shadow cursor-pointer transition-transform hover:scale-105" loading="lazy">'),Ct=m("<p> </p> <p> </p>",1),Dt=m("<p> </p>"),Ft=m("<p> </p>"),Jt=m("<p> </p>"),Bt=m("<p>Generated image with default guidance scale: 7.5 or model's default</p>"),Wt=m("<p> </p>"),jt=m("<p>Generated image with default scheduler: DPMSolverMultistep or model's default</p>"),zt=m("<p> </p>"),Ht=m("<p>Generated image with default inference steps: 30</p>"),Yt=m("<p> </p>"),qt=m("<p>Generated image with random seed: -1</p>"),Qt=m("<p> </p>"),Vt=m("<p>Generated image with latest model version</p>"),Xt=m('<div class="fixed inset-0 overflow-auto bg-[#1A1A1A] flex flex-col md:flex-row items-center gap-4 z-50 px-4 py-4"><img alt="Information Modal" class="max-w-[70vh] max-h-[70vh] md:max-w-[90vh] md:max-h-[90vh] rounded shadow-lg"> <div class="flex flex-col gap-1 text-white"><!> <!> <!> <p> </p> <p> </p> <p> </p> <p> </p> <!> <p> </p> <!> <!> <!> <!> <!> <!> <!> <!></div></div>'),Zt=m('<!> <main class="bg-[#1A1A1A] flex flex-col justify-evenly items-center gap-8 py-12 min-h-screen"><!> <div class="fixed top-2 right-2"><!></div> <section class="text-blue-500 flex flex-col md:flex-row gap-3 justify-center items-center"><h2 class="text-4xl">SinkinAI API frontend</h2> <p class="text-white"> <br> <br> <br> <br> </p> <div class="flex flex-col gap-1 justify-center items-center"><!> <!> <!></div></section> <!> <div class="bg-[#1A1A1A] grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 p-4"></div> <!></main>',1);function ia(oe,Q){$t(Q,!0);const[I,We]=yt(),B=()=>F(ie,"$loadedApiKeys",I),k=()=>F(L,"$savedImages",I),V=()=>F(ne,"$savedModels",I),X=()=>F(de,"$savedLoras",I),je=()=>F(ce,"$creditsLeft",I);let S=w(De([])),K=w(De([])),o=w(null),se=0;const le=20,ie=J([]),ne=J([]),L=J([]),de=J([]),ce=J(0);Be(()=>{const r=localStorage.getItem("apiKeys");if(r!=null){const f=JSON.parse(r);ie.set(f)}const d=localStorage.getItem("models");if(d!=null){const f=JSON.parse(d);ne.set(f)}const i=localStorage.getItem("images");if(i!=null){const f=JSON.parse(i);L.set(f)}const g=localStorage.getItem("loras");if(g!=null){const f=JSON.parse(g);de.set(f)}ce.set(ze())});function ze(){let r=0;return B().forEach(d=>{r+=d.creditsLeft}),r}function He(){L.set([]),localStorage.removeItem("images"),M({title:"All the images has been removed",description:`
      Why?
      `})}function Ye(){L.set([]),localStorage.removeItem("apiKeys"),M({title:"All the API keys has been removed",description:`
      Why?
      `})}function qe(){L.set([]),localStorage.removeItem("models"),M({title:"All the models has been removed",description:`
      Why?
      `})}function Qe(){L.set([]),localStorage.removeItem("loras"),M({title:"All the LoRAs has been removed",description:`
      Why?
      `})}function ve(){const r=se*le,d=r+le;p(K,[...t(K),...t(S).slice(r,d)],!0),se++}function pe(){window.innerHeight+window.scrollY>=document.body.offsetHeight-300&&ve()}Be(()=>(p(S,k().map((r,d)=>({...r,index:d})),!0),ve(),window.addEventListener("scroll",pe),()=>window.removeEventListener("scroll",pe)));const Ve=!0;let W=w(!1),ue=w("Modal text"),Xe=w("Modal title"),P=w(null);const j=()=>p(W,!t(W));function me(r){p(Xe,r.title,!0),p(ue,r.description,!0),p(P,async()=>{await r.callbackFn(),p(P,null)}),p(W,!0)}let Z=w(!1),fe=w("Toast header"),ge=w("Toast body");function M(r){p(fe,r.title,!0),p(ge,r.description,!0),p(Z,!0)}function _e(r,d=!1){d&&(L.set(k().filter(i=>i.image_url!==r)),localStorage.setItem("images",JSON.stringify(k())),p(S,k().filter(i=>i.image_url!==r),!0),p(K,t(K).filter(i=>i.image_url!==r),!0),p(o,null)),me({title:"Are you sure?",description:`
      <p>
      This image will be PERMANENTLY removed
      </p>
      `,callbackFn:()=>{_e(r,!0)}})}var he=Zt(),$e=T(he);At($e,{});var xe=s($e,2),we=v(xe);bt(we,{body:!0,header:"Modal title",get isOpen(){return t(W)},toggle:j,theme:"light",children:(r,d)=>{var i=Rt(),g=T(i),f=v(g);Fe(f,()=>t(ue)),c(g);var z=s(g,2);Lt(z,{children:(H,Y)=>{var q=Ce(),E=T(q);{var re=A=>{var b=Et(),N=T(b);x(N,{color:"danger",onclick:async()=>{t(P)!==null&&(await t(P)(),j())},children:(O,C)=>{$();var D=_("Confirm");l(O,D)},$$slots:{default:!0}});var G=s(N,2);x(G,{color:"primary",onclick:()=>{p(P,null),j()},children:(O,C)=>{$();var D=_("Cancel");l(O,D)},$$slots:{default:!0}}),l(A,b)},R=A=>{x(A,{color:"primary",onclick:j,children:(b,N)=>{$();var G=_("Ok");l(b,G)},$$slots:{default:!0}})};y(E,A=>{t(P)!==null?A(re):A(R,!1)})}l(H,q)},$$slots:{default:!0}}),l(r,i)},$$slots:{default:!0}});var U=s(we,2),Ze=v(U);It(Ze,{autohide:!0,body:!0,get header(){return t(fe)},get isOpen(){return t(Z)},$$events:{close:()=>p(Z,!1)},children:(r,d)=>{var i=Ce(),g=T(i);Fe(g,()=>t(ge)),l(r,i)},$$slots:{default:!0}}),c(U);var ee=s(U,2),te=s(v(ee),2),ye=v(te),Ae=s(ye,2),be=s(Ae,2),Ie=s(be,2),Ue=s(Ie,2);c(te);var ke=s(te,2),Le=v(ke);x(Le,{outline:!0,color:"primary",onclick:()=>{Mt("sinkinAPI-"+St(),{savedApiKeys:B(),savedImages:k(),savedLoRAs:X(),savedModels:V()})},children:(r,d)=>{$();var i=_("Export configuration");l(r,i)},$$slots:{default:!0}});var Me=s(Le,2);x(Me,{outline:!0,color:"success",onclick:async()=>{const r=await Pt();if(r===null){M({title:"Select a valid file to import",description:"The selected file should be exported from this application, if not, it can broke your saved data"});return}await Gt(r,{savedApiKeys:B(),savedImages:k(),savedLoRAs:X(),savedModels:V()})?(M({title:"The importation is done, please reload the page",description:"The page will be reloaded automatically in 5 seconds"}),setTimeout(()=>{window.location.reload()},5e3)):M({title:"The file is invalid",description:"Are you sure the file is a configuration file from this app? check console if so"})},children:(r,d)=>{$();var i=_("Import configuration");l(r,i)},$$slots:{default:!0}});var et=s(Me,2);x(et,{outline:!0,color:"danger",onclick:()=>{me({title:"Are you sure?",description:"This wil <strong>DELETE ALL your saved data</strong>",callbackFn:()=>{He(),Ye(),Qe(),qe()}})},children:(r,d)=>{$();var i=_("Delete configuration");l(r,i)},$$slots:{default:!0}}),c(ke),c(ee);var Se=s(ee,2);x(Se,{outline:!0,color:"warning",onclick:()=>{Kt("/")},children:(r,d)=>{$();var i=_("Go to the main page");l(r,i)},$$slots:{default:!0}});var ae=s(Se,2);kt(ae,21,()=>t(K),Tt,(r,d)=>{var i=Ot();i.__click=[Nt,o,d],h(()=>Je(i,"src",t(d).image_url)),l(r,i)}),c(ae);var tt=s(ae,2);{var at=r=>{var d=Xt(),i=v(d),g=s(i,2),f=v(g);x(f,{color:"info",onclick:()=>{p(o,null)},children:(e,a)=>{$();var n=_("Back to gallery");l(e,n)},$$slots:{default:!0}});var z=s(f,2);x(z,{color:"info",onclick:()=>{var e;((e=t(o))==null?void 0:e.index)!==void 0&&(t(o).index>t(S).length||p(o,t(S)[t(o).index+1],!0))},children:(e,a)=>{$();var n=_("Next");l(e,n)},$$slots:{default:!0}});var H=s(z,2);x(H,{color:"info",onclick:()=>{var e;((e=t(o))==null?void 0:e.index)!==void 0&&t(o).index!==0&&p(o,t(S)[t(o).index-1],!0)},children:(e,a)=>{$();var n=_("Previous");l(e,n)},$$slots:{default:!0}});var Y=s(H,2),q=v(Y);c(Y);var E=s(Y,2),re=v(E);c(E);var R=s(E,2),A=v(R);c(R);var b=s(R,2),N=v(b);c(b);var G=s(b,2);{var O=e=>{var a=Ct(),n=T(a),_t=v(n);c(n);var Oe=s(n,2),ht=v(Oe);c(Oe),h(()=>{u(_t,`Generated image with LoRA: ${t(o).lora??""}`),u(ht,`Generated image with LoRA scale: ${t(o).lora_scale??""}`)}),l(e,a)};y(G,e=>{t(o).lora!==void 0&&e(O)})}var C=s(G,2),D=v(C);c(C);var Pe=s(C,2);{var ot=e=>{var a=Dt(),n=v(a);c(a),h(()=>u(n,`Generated image with negative prompt: ${t(o).negative_prompt??""}`)),l(e,a)};y(Pe,e=>{t(o).negative_prompt!==void 0&&e(ot)})}var Ge=s(Pe,2);{var st=e=>{var a=Ft(),n=v(a);c(a),h(()=>u(n,`Generated image with default negative prompt: ${t(o).use_default_neg??""}`)),l(e,a)};y(Ge,e=>{t(o).use_default_neg!==void 0&&e(st)})}var Te=s(Ge,2);{var lt=e=>{var a=Jt(),n=v(a);c(a),h(()=>u(n,`Generated image with custom guidance scale: ${t(o).scale??""}`)),l(e,a)},it=e=>{var a=Bt();l(e,a)};y(Te,e=>{t(o).scale!==void 0?e(lt):e(it,!1)})}var Ke=s(Te,2);{var nt=e=>{var a=Wt(),n=v(a);c(a),h(()=>u(n,`Generated image with scheduler: ${t(o).scheduler??""}`)),l(e,a)},dt=e=>{var a=jt();l(e,a)};y(Ke,e=>{t(o).scheduler!==void 0?e(nt):e(dt,!1)})}var Ee=s(Ke,2);{var ct=e=>{var a=zt(),n=v(a);c(a),h(()=>u(n,`Generated image with custom inference steps: ${t(o).steps??""}`)),l(e,a)},vt=e=>{var a=Ht();l(e,a)};y(Ee,e=>{t(o).steps!==void 0?e(ct):e(vt,!1)})}var Re=s(Ee,2);{var pt=e=>{var a=Yt(),n=v(a);c(a),h(()=>u(n,`Generated image with custom seed: ${t(o).seed??""}`)),l(e,a)},ut=e=>{var a=qt();l(e,a)};y(Re,e=>{t(o).seed!==void 0?e(pt):e(ut,!1)})}var Ne=s(Re,2);{var mt=e=>{var a=Qt(),n=v(a);c(a),h(()=>u(n,`Generated image with model version: ${t(o).version??""}`)),l(e,a)},ft=e=>{var a=Vt();l(e,a)};y(Ne,e=>{t(o).version!==void 0?e(mt):e(ft,!1)})}var gt=s(Ne,2);x(gt,{color:"danger",onclick:()=>{var e;((e=t(o))==null?void 0:e.image_url)!==void 0&&_e(t(o).image_url)},children:(e,a)=>{$();var n=_("Delete Image");l(e,n)},$$slots:{default:!0}}),c(g),c(d),h(()=>{Je(i,"src",t(o).image_url),u(q,`Image URL: ${t(o).image_url??""}`),u(re,`Generated with prompt: ${t(o).prompt??""}`),u(A,`Generated width: ${t(o).width??""}`),u(N,`Generated height: ${t(o).height??""}`),u(D,`Generated image with model ID: ${t(o).model_id??""}`)}),l(r,d)};y(tt,r=>{t(o)&&r(at)})}c(xe),h(()=>{u(ye,`API keys Available: ${B().length??""} `),u(Ae,` Models saved: ${V().length??""} `),u(be,` Images saved: ${k().length??""} `),u(Ie,` LoRAs saved: ${X().length??""} `),u(Ue,` Credits left: ${je()??""}`)}),l(oe,he);var rt=xt({prerender:Ve});return We(),rt}wt(["click"]);export{ia as component};
